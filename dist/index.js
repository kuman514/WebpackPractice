(()=>{"use strict";class t{constructor(t,e){this.props=t,this.state=e,this.rootElement=null,this.render=()=>this.rootElement,this.setState=t=>{for(const[e,s]of Object.entries(t))this.state[e]=s;this.render()}}}const e=new Set,s=t=>{e.add(t)},o=t=>{clearInterval(t),e.delete(t)},n=()=>{e.forEach((t=>{clearInterval(t)})),e.clear()};class r extends t{constructor(t,e){super(t,e),this.intervalId=setInterval((()=>{this.setState({date:new Date})}),1e3),s(this.intervalId),this.rootElement=document.createElement("div"),this.rootElement.className="clock",this.render=()=>(this.rootElement.textContent=this.state.date,this.rootElement)}}class a extends t{constructor(t,e){super(t,e),this.rootElement=document.createElement("div"),this.rootElement.className="stopwatch-control",this.rootElement.addEventListener("click",(t=>{switch(t.target.id){case"stopwatch-start":this.props.onStart();break;case"stopwatch-stop":this.props.onStop();break;case"stopwatch-reset":this.props.onReset()}})),this.render=()=>{const t=document.createElement("button");t.id="stopwatch-start",t.textContent="Start";const e=document.createElement("button");e.id="stopwatch-stop",e.textContent="Stop";const s=document.createElement("button");return s.id="stopwatch-reset",s.textContent="Reset",this.rootElement.appendChild(t),this.rootElement.appendChild(e),this.rootElement.appendChild(s),this.rootElement}}}const i=36e5;class h extends t{constructor(t,e){super(t,e),this.rootElement=document.createElement("div"),this.rootElement.className="stopwatch-timestamp",this.render=()=>{let t=this.state.elapsed;const e=String(Math.floor(t/i)).padStart(2,"0");t%=i;const s=String(Math.floor(t/6e4)).padStart(2,"0");t%=6e4;const o=String(Math.floor(t/1e3)).padStart(2,"0");t%=1e3;const n=String(Math.floor(t/10)).padStart(2,"0");return this.rootElement.textContent=`${e}:${s}:${o}.${n}`,this.rootElement}}}class l extends t{constructor(t,e){super(t,e),this.stopwatchInterval=null,this.deltaOrg=null,this.timestamp=new h({},{elapsed:0}),this.startStopwatch=()=>{this.deltaOrg=Date.now(),this.stopwatchInterval=setInterval((()=>{const t=Date.now()-this.deltaOrg,e=this.timestamp.state.elapsed+t;this.timestamp.setState({elapsed:e}),this.deltaOrg=Date.now()}),10),s(this.stopwatchInterval)},this.stopStopwatch=()=>{this.stopwatchInterval&&(o(this.stopwatchInterval),this.stopwatchInterval=null)},this.resetStopwatch=()=>{this.stopStopwatch(),this.timestamp.setState({elapsed:0})},this.controller=new a({onStart:this.startStopwatch,onStop:this.stopStopwatch,onReset:this.resetStopwatch},{}),this.rootElement=document.createElement("div"),this.rootElement.className="stopwatch",this.render=()=>(this.rootElement.appendChild(this.controller.render()),this.rootElement.appendChild(this.timestamp.render()),this.rootElement)}}class c extends t{constructor(t,e){super(t,e),this.rootElement=document.createElement("div"),this.rootElement.className="content",this.render=()=>{switch(this.rootElement.innerText="",n(),this.state.mode){case"clock":this.rootElement.appendChild(new r({},{date:new Date}).render());break;case"stopwatch":this.rootElement.appendChild(new l({},{}).render())}return this.rootElement}}}class d extends t{constructor(t,e){super(t,e),this.rootElement=document.createElement("div"),this.rootElement.className="buttons",this.rootElement.addEventListener("click",(t=>{const e=parseInt(t.target.id);null!=e&&this.props.onClick(this.props.modes[e])})),this.render=()=>(Array.from({length:4},((t,e)=>{const s=document.createElement("button");return s.id=e,s.textContent=this.props.modes[e],s})).forEach((t=>{this.rootElement.appendChild(t)})),this.rootElement)}}new class extends t{constructor(t,e){super(t,e),this.content=new c({},{mode:"clock"}),this.changeMode=t=>{this.content.setState({mode:t})},this.buttons=new d({modes:["clock","stopwatch","countdown","world"],onClick:this.changeMode},{}),this.rootElement=document.querySelector("main"),this.rootElement.className="main",this.render=()=>(this.rootElement.appendChild(this.buttons.render()),this.rootElement.appendChild(this.content.render()),this.rootElement)}}({},{}).render()})();